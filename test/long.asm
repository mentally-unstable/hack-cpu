@256
D=A
@SP
M=D
/// XXX XXX DECL Sys.init
(Sys.init)
/// XXX XXX CALL main
// XXX PUSH NUM
@END
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@LCL
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@ARG
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@THIS
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@THAT
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PREP
@SP
D=M
@0
D=D-A
@5
D=D-A
@ARG
M=D
@SP
D=M
@LCL
M=D
@main
0;JMP
/// XXX XXX DECL main
(main)
// XXX PUSH NUM
@0
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH NUM
@0
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH NUM
@7
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH NUM
@3
D=A
@SP
A=M
M=D
@SP
M=M+1
/// XXX XXX CALL my_div
// XXX PUSH NUM
@my_div$return
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@LCL
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@ARG
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@THIS
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@THAT
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PREP
@SP
D=M
@2
D=D-A
@5
D=D-A
@ARG
M=D
@SP
D=M
@LCL
M=D
@my_div
0;JMP
(my_div$return)
// XXX POP SEG
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
@LCL
D=M
@0
D=D+A
@T2
M=D
@T1
D=M
@T2
A=M
M=D
// XXX PUSH NUM
@10
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH NUM
@7
D=A
@SP
A=M
M=D
@SP
M=M+1
/// XXX XXX CALL my_sub
// XXX PUSH NUM
@my_sub$return
D=A
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@LCL
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@ARG
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@THIS
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH ADDRESS
@THAT
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PREP
@SP
D=M
@2
D=D-A
@5
D=D-A
@ARG
M=D
@SP
D=M
@LCL
M=D
@my_sub
0;JMP
(my_sub$return)
// XXX POP SEG
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
@LCL
D=M
@1
D=D+A
@T2
M=D
@T1
D=M
@T2
A=M
M=D
// XXX PUSH FROM SEG
@0
D=A
@LCL
A=D+M
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH FROM SEG
@1
D=A
@LCL
A=D+M
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@T2
M=D
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
// XXX EQ
@T2
D=D-M
@TRUE
D;JEQ
D=0
(SET)
@T1
M=D
@T1
D=M
@SP
A=M
M=D
@SP
M=M+1
@DONE
0;JMP
(TRUE)
D=-1
@SET
0;JMP
(DONE)
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@test.0
M=D
/// RETURN XXX XXX
@LCL
D=M
@frame
M=D
@5
D=A
@frame
D=M-D
A=D
D=M
@ret
M=D
// XXX POP SEG
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
@ARG
D=M
@0
D=D+A
@T2
M=D
@T1
D=M
@T2
A=M
M=D
@ARG
D=M+1
@SP
M=D
@frame
A=M
A=A-1
D=M
@THAT
M=D
@2
D=A
@frame
A=M
A=A-D
D=M
@THIS
M=D
@3
D=A
@frame
A=M
A=A-D
D=M
@ARG
M=D
@4
D=A
@frame
A=M
A=A-D
D=M
@LCL
M=D
@ret
A=M
0;JMP
/// XXX XXX DECL my_div
(my_div)
// XXX PUSH FROM SEG
@0
D=A
@ARG
A=D+M
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH FROM SEG
@1
D=A
@ARG
A=D+M
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@T2
M=D
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
// XXX DIV
@T3
M=0
@T1
D=M
@0
D=D-A
@ZERO
D;JEQ
@ANEG
D;JLT
(CHECK)
@T2
D=M
@0
D=D-A
@ERR
M=1
@END
D;JEQ
@BNEG
D;JLT
@LOOP
0;JMP
(ZERO)
@SP
A=M
M=0
@DONE
0;JMP
(ANEG)
@T1
D=M
M=!M
M=M+1
@T4
M=!M
@CHECK
0;JMP
(BNEG)
@T2
D=M
M=!M
M=M+1
@T4
M=!M
@T1
D=M
@T5
M=D
@LOOP
0;JMP
(LOOP)
@T2
D=M
@T5
M=M-D
D=M
@DONE
D;JLT
@T3
M=M+1
@LOOP
0;JMP
(DONE)
@T3
D=M
@SP
A=M
M=D
@SP
M=M+1
@T4
D=M
@NEGATE
D;JLT
@FINISH
0;JMP
(NEGATE)
@SP
A=M
M=!M
M=M+1
(FINISH)
/// RETURN XXX XXX
@LCL
D=M
@frame
M=D
@5
D=A
@frame
D=M-D
A=D
D=M
@ret
M=D
// XXX POP SEG
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
@ARG
D=M
@0
D=D+A
@T2
M=D
@T1
D=M
@T2
A=M
M=D
@ARG
D=M+1
@SP
M=D
@frame
A=M
A=A-1
D=M
@THAT
M=D
@2
D=A
@frame
A=M
A=A-D
D=M
@THIS
M=D
@3
D=A
@frame
A=M
A=A-D
D=M
@ARG
M=D
@4
D=A
@frame
A=M
A=A-D
D=M
@LCL
M=D
@ret
A=M
0;JMP
/// XXX XXX DECL my_sub
(my_sub)
// XXX PUSH FROM SEG
@0
D=A
@ARG
A=D+M
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX PUSH FROM SEG
@1
D=A
@ARG
A=D+M
D=M
@SP
A=M
M=D
@SP
M=M+1
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@T2
M=D
// XXX POP STATIC
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
// XXX DIV
@T3
M=0
@T1
D=M
@0
D=D-A
@ZERO
D;JEQ
@ANEG
D;JLT
(CHECK)
@T2
D=M
@0
D=D-A
@ERR
M=1
@END
D;JEQ
@BNEG
D;JLT
@LOOP
0;JMP
(ZERO)
@SP
A=M
M=0
@DONE
0;JMP
(ANEG)
@T1
D=M
M=!M
M=M+1
@T4
M=!M
@CHECK
0;JMP
(BNEG)
@T2
D=M
M=!M
M=M+1
@T4
M=!M
@T1
D=M
@T5
M=D
@LOOP
0;JMP
(LOOP)
@T2
D=M
@T5
M=M-D
D=M
@DONE
D;JLT
@T3
M=M+1
@LOOP
0;JMP
(DONE)
@T3
D=M
@SP
A=M
M=D
@SP
M=M+1
@T4
D=M
@NEGATE
D;JLT
@FINISH
0;JMP
(NEGATE)
@SP
A=M
M=!M
M=M+1
(FINISH)
/// RETURN XXX XXX
@LCL
D=M
@frame
M=D
@5
D=A
@frame
D=M-D
A=D
D=M
@ret
M=D
// XXX POP SEG
@SP
M=M-1
@SP
A=M
D=M
@T1
M=D
@ARG
D=M
@0
D=D+A
@T2
M=D
@T1
D=M
@T2
A=M
M=D
@ARG
D=M+1
@SP
M=D
@frame
A=M
A=A-1
D=M
@THAT
M=D
@2
D=A
@frame
A=M
A=A-D
D=M
@THIS
M=D
@3
D=A
@frame
A=M
A=A-D
D=M
@ARG
M=D
@4
D=A
@frame
A=M
A=A-D
D=M
@LCL
M=D
@ret
A=M
0;JMP
(END)
@END
0;JMP
